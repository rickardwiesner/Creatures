@using ClashOfTheCharacters.Helpers;
@using ClashOfTheCharacters.Models;

@model IEnumerable<TeamMember>

@{
    ViewBag.Title = "Team";
}


<div class="row">

    @for (int i = 0; i < 6; i++)
    {
        if (i == 2)
        {
            <div class="clearfix visible-lg"></div>
            <div class="clearfix visible-sm"></div>
            <div class="clearfix visible-md"></div>
        }

        var teamMember = Model.FirstOrDefault(tm => tm.Slot == i + 1);

        <div class="col-md-6 col-sm-6 col-xs-12">
            @*<a>*@
                <div class="col-md-12 col-sm-12 col-xs-12 gamecard">
                    <h4>
                        <strong>@(teamMember != null ? teamMember.Character.Name : "Empty Slot")</strong>
                        <span> @(teamMember != null ? "Lvl: " + teamMember.Level.ToString() : "")</span>
                        @if (teamMember != null)
                        {
                            <span><img class="gamecard-element" src="@Helper.GetElementUrl(teamMember.Character.Element)" /></span>
                        }
                    </h4>
                    <img class="img-responsive gamecard-image" src=@(teamMember != null ? teamMember.Character.ImageUrl : "/Images/Characters/emptyslot.jpg") />
                    <div class="gamecard-xpbar">
                        <div style="width:@(teamMember != null ? Helper.GetPercentage(teamMember.Xp, teamMember.MaxXp) : "0")%"></div>
                    </div>
  
                    <p>
                        <span class="gamecard-worth">Worth: @(teamMember != null ? teamMember.Worth : 0)</span>
                        <span class="gamecard-xp-maxxp">@(teamMember != null ? teamMember.Xp : 0) / @(teamMember != null ? teamMember.MaxXp : 0) Xp</span>
                    </p>
                    
                    <div class="clearfix visible-lg"></div>
                    <div class="clearfix visible-sm"></div>
                    <div class="clearfix visible-md"></div>
                    <div class="clearfix visible-xs"></div>
                    
                    <div class="col-md-6 col-sm-6 col-xs-6 text-center">
                        <h5>Stats</h5>
                        <p>Dmg: @(teamMember != null ? teamMember.Damage : 0)</p>
                        <p>Def: @(teamMember != null ? teamMember.Defense : 0)</p>
                        <p>Hp: @(teamMember != null ? teamMember.Hp : 0)</p>
                    </div>
                    <div class="col-md-6 col-sm-6 col-xs-6 text-center">
                        <h5>History</h5>
                        <p>Battles: @(teamMember != null ? teamMember.BattleAppearances.Count : 0)</p>
                        <p>Kills: @(teamMember != null ? teamMember.Kills : 0)</p>
                        <p>Deaths: @(teamMember != null ? teamMember.Deaths : 0)</p>
                    </div>
                </div>
            @*</a>*@
        </div>
    }
</div>
